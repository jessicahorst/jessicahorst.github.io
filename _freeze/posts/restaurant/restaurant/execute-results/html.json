{
  "hash": "ae56dc04bf74293b5b8f1c5444af2f6f",
  "result": {
    "markdown": "### Restaurants \n\n\n---\ntitle: \"restaurant inspection\"\nauthor: \"Jessica Horst\"\ndate: \"2023-12-14\"\ncategories: [restaurant, data analysis]\nimage: restaurant.png\nfrom: markdown+emoji\n\nexecute: \n  warning: false\n  message: false\n  \ntoc: true\n---\n\n\n\n\nLet's analyze the `restaurant` data:\n\n:plate_with_cutlery:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrestaurant <- read_csv(\"https://bcdanl.github.io/data/DOHMH_NYC_Restaurant_Inspection.csv\")\n```\n:::\n\n\n## Q1a\nWhat are the mean, standard deviation, first quartile, median, third quartile, and maximum of `SCORE` for each `GRADE` of restaurants?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrestaurant %>% group_by(GRADE) %>% skim(SCORE) %>% select(-n_missing)\n```\n\n::: {.cell-output-display}\nTable: Data summary\n\n|                         |           |\n|:------------------------|:----------|\n|Name                     |Piped data |\n|Number of rows           |17633      |\n|Number of columns        |12         |\n|_______________________  |           |\n|Column type frequency:   |           |\n|numeric                  |1          |\n|________________________ |           |\n|Group variables          |GRADE      |\n\n\n**Variable type: numeric**\n\n|skim_variable |GRADE | complete_rate|  mean|    sd| p0| p25| p50| p75| p100|hist  |\n|:-------------|:-----|-------------:|-----:|-----:|--:|---:|---:|---:|----:|:-----|\n|SCORE         |A     |             1|  9.26|  3.42|  0|   7|  10|  12|   13|▁▂▂▅▇ |\n|SCORE         |B     |             1| 21.03|  4.16|  0|  18|  21|  24|   36|▁▁▇▇▁ |\n|SCORE         |C     |             1| 38.56| 10.83|  0|  31|  36|  44|   86|▁▇▇▂▁ |\n:::\n:::\n\n\n## Q1b\n\nHow many restaurants with a GRADE of A are there in NYC?\n\nHow much percentage of restaurants in NYC are a GRADE of C?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfreq <- as.data.frame( table(restaurant$GRADE) )\nprop <- as.data.frame( 100 * prop.table(table(restaurant$GRADE)) )\n```\n:::\n\n\n## Q1c\n\nProvide both (1) ggplot code and (2) a simple comment to describe how the distribution of SCORE varies by GRADE and CRITICAL FLAG.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(restaurant) +\n  geom_histogram(aes(x = SCORE), binwidth = 1 ) +\n  facet_wrap( `CRITICAL FLAG` ~ GRADE, scales = 'free' )\n```\n\n::: {.cell-output-display}\n![](restaurant_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n## Q1d\n\nProvide both (1) ggplot code and (2) a simple comment to describe how the proportion of CRITICAL FLAG varies by GRADE and BORO.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(restaurant) +\n  geom_bar(aes(x = `CRITICAL FLAG`,\n               y = after_stat(prop), group = 1)) +\n  facet_grid( GRADE ~ BORO )\n```\n\n::: {.cell-output-display}\n![](restaurant_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n## Q1e\n\nFor the 10 most common CUISINE DESCRIPTION values, find the CUISINE DESCRIPTION value that has the highest proportion of GRADE A.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nq2e <- restaurant %>% \n  group_by(`CUISINE DESCRIPTION`) %>% \n  mutate(n = n()) %>% \n  ungroup() %>% \n  filter(dense_rank(-n) <= 10) %>% \n  group_by(`CUISINE DESCRIPTION`, GRADE) %>% \n  count() %>% \n  group_by(`CUISINE DESCRIPTION`) %>% \n  mutate(prop_A = n / sum(n)) %>% \n  filter(GRADE == 'A') %>% \n  arrange(-prop_A)\n```\n:::\n\n\n## Q1f\n\nFind the 3 most common names of restaurants (DBA) in each BORO.\nIf the third most common DBA values are multiple, please include all the DBA values.\nOverall, which DBA value is most common in NYC?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nq2f <- restaurant %>% \n  select(DBA, BORO) %>% \n  group_by(BORO, DBA) %>% \n  summarize(n = n()) %>% \n  mutate(ranking = dense_rank(-n)) %>% \n  filter(ranking <= 3) %>% \n  arrange(BORO, ranking)\n\nq2f_ <- restaurant %>% \n  group_by(DBA) %>% \n  count() %>% \n  arrange(-n)\n```\n:::\n\n\n## Q1g\n\nFor all the DBA values that appear in the result of Q1f, find the DBA value that is most likely to commit critical violation.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nq2g <- restaurant %>% \n  filter(DBA %in% q2f$DBA) %>% \n  group_by(DBA, `CRITICAL FLAG`) %>% \n  count() %>% \n  group_by(DBA) %>% \n  mutate(lag_n = lag(n),\n         tot = sum(n),\n         prop_crit = lag_n / tot) %>% \n  select(DBA, prop_crit) %>% \n  filter(!is.na(prop_crit)) %>% \n  arrange(-prop_crit)\n```\n:::\n",
    "supporting": [
      "restaurant_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}